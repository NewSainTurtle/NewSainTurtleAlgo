## [ğŸ˜¬](https://www.acmicpc.net/problem/2922) [bj2922] ì¦ê±°ìš´ ë‹¨ì–´

> **ì†Œìš” ì‹œê°„: 95ë¶„<br>
> ë©”ëª¨ë¦¬: 11456KB<br>
> ì‹œê°„: 72ms**

## ë¬¸ì œ ì ‘ê·¼

- ì¡°í•©ì„ ì´ìš©í•´ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•œë‹¤.

## ë¬¸ì œ í’€ì´

1. ë¹ˆ ê³³ì˜ ìœ„ì¹˜ë¥¼ blanksì— ì €ì¥í•˜ë©´ì„œ, ì…ë ¥ ë¬¸ì ì¤‘ 'L'ì´ ìˆëŠ” ì§€ í™•ì¸í•œë‹¤.

2. setFactorialì„ í˜¸ì¶œí•´ ë¹ˆ ê³³ì˜ ê°œìˆ˜ê¹Œì§€ íŒ©í† ë¦¬ì–¼ì„ ê³„ì‚°í•œë‹¤.

3. dfsí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ë‹¨ì–´ë¥¼ ë§Œë“ ë‹¤. (idx=í˜„ì¬ ì ‘ê·¼í•  blanks ì¸ë±ìŠ¤, L=ë‹¨ì–´ì— 'L'ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€, checkB=ììŒì´ ëœ blankê°œìˆ˜)

4. idxê°€ blank_sizeì™€ ê°™ì€ ê²½ìš°,<br>
   4-1. ë‹¨ì–´ì— Lì´ ì—†ê³ , checkBê°€ 0ì¸ ê²½ìš°ëŠ” ë‹¨ì–´ì— Lì´ ë“¤ì–´ì˜¬ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•œë‹¤.<br>
   4-2. ëª¨ìŒì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•´ sumAì— ì €ì¥í•œë‹¤.<br>
   4-3. Lì´ ìˆëŠ” ê²½ìš°, blankì— ë¬´ì¡°ê±´ Lì´ í¬í•¨ë  í•„ìš”ëŠ” ì—†ìœ¼ë¯€ë¡œ ììŒì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•´ sumBì— ì €ì¥í•œë‹¤.<br>
   4-4. Lì´ ì—†ëŠ” ê²½ìš°, Lì´ ëª‡ ê°œ ìˆëŠ”ì§€ì— ë”°ë¼ ììŒì„ ì¡°í•©í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•´ sumBì— ì €ì¥í•œë‹¤.<br>
   4-5. cntì— sumA\*sumB ê°’ì„ ì €ì¥í•˜ê³  ì¢…ë£Œí•œë‹¤.<br>

5. í˜„ì¬ ë¹ˆ ê³³ì— ëª¨ìŒì´ ì™€ë„ ë˜ëŠ” ê²½ìš°, ë¹ˆê³³ì— 'A'ë¥¼ ë„£ì€ í›„ dfsë¥¼ ì¬ê·€ë¡œ í˜¸ì¶œí•œë‹¤.

6. í˜„ì¬ ë¹ˆ ê³³ì— ììŒì´ ì™€ë„ ë˜ëŠ” ê²½ìš°, ë¹ˆê³³ì— 'B'ë¥¼ ë„£ì€ í›„ dfsë¥¼ ì¬ê·€ë¡œ í˜¸ì¶œí•œë‹¤.

7. ë¹ˆê³³ì— '\_'ë¥¼ ì €ì¥í•´ ì´ˆê¸°í™”í•œë‹¤.

8. dfsê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ cntë¥¼ ì¶œë ¥í•œë‹¤.

## ì „ì²´ ì½”ë“œ

```java
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Main_bj2922 {
    static char[] input;
    static int[] blanks;
    static int[] f;
    static int blank_size;
    static long cnt;

    public static void main(String[] args) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        input = br.readLine().toCharArray();
        boolean L = false;
        blank_size = 0;
        blanks = new int[10];
        cnt = 0;
        for (int i = 0; i < input.length; i++) {
            if (input[i] == '_') {
                blanks[blank_size++] = i;
            } else if (input[i] == 'L') {
                L = true;
            }
        }
        f = new int[blank_size + 1];
        setFactorial(blank_size);
        dfs(0, L, 0);
        System.out.println(cnt);
    }

    static void dfs(int idx, boolean L, int checkB) {
        if (idx == blank_size) {
            if (!L && checkB == 0) return;
            long sumA = (long) Math.pow(5, blank_size - checkB);
            long sumB = 0;
            if (L) {
                sumB = (long) Math.pow(21, checkB);
            } else if (!L) {
                long check = 1;
                for (int r = checkB; r > 0; r--) {
                    sumB += combination(checkB, r, f[checkB]) * check;
                    check *= 20;
                }
            }
            cnt += sumA * sumB;
            return;
        }
        int input_idx = blanks[idx];

        int im2 = check_AEIOU(input_idx - 2);
        int im1 = check_AEIOU(input_idx - 1);
        int ip1 = check_AEIOU(input_idx + 1);
        int ip2 = check_AEIOU(input_idx + 2);

        int left = im1 + im2;
        int middle = im1 + ip1;
        int right = ip1 + ip2;

        if (left != 2 && middle != 2 && right != 2) {
            //ëª¨ìŒ ì—°ì† ê°€ëŠ¥
            input[input_idx] = 'A';
            dfs(idx + 1, L, checkB);
        }
        if (left != -2 && middle != -2 && right != -2) {
            //ììŒ ì—°ì† ê°€ëŠ¥
            input[input_idx] = 'B';
            dfs(idx + 1, L, checkB + 1);
        }
        input[input_idx] = '_';
    }

    static int check_AEIOU(int i) {
        if (i < 0 || i >= input.length) return 0;
        char A = input[i];

        if (A == '_') return 0;
        if (A == 'A' || A == 'E' || A == 'I' || A == 'O' || A == 'U') return 1;
        return -1;
    }

    static int combination(int n, int r, int factorial_n) {
        if (n == r) return 1;
        return factorial_n / (f[n - r] * f[r]);
    }

    static int setFactorial(int n) {
        if (n < 2) return f[0] = f[1] = 1;
        return f[n] = setFactorial(n - 1) * n;
    }
}
```
