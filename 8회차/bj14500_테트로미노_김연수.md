### BJ14500 í…ŒíŠ¸ë¡œë¯¸ë…¸

[ğŸ“ë¬¸ì œë³´ê¸°](https://www.acmicpc.net/problem/14500)

---

#### ë¬¸ì œí’€ì´

<img src="https://user-images.githubusercontent.com/83412032/226091930-c39de20f-4faa-42a0-b7dd-9feac21174c4.png" alt="image" style="zoom:40%;" />

- í…ŒíŠ¸ë¡œë¯¸ë…¸ëŠ” ë°˜ë“œì‹œ í•œ ì •ì‚¬ê°í˜•ì´ ì •í™•íˆ í•˜ë‚˜ì˜ ì¹¸ì„ í¬í•¨í•˜ë„ë¡ ë†“ì•„ì•¼ í•˜ë©°, íšŒì „ì´ë‚˜ ëŒ€ì¹­ì„ ì‹œì¼œë„ ëœë‹¤.
  - í…ŒíŠ¸ë¡œë¯¸ë…¸ 5ê°œ ë„í˜• ì¤‘ 4ê°œëŠ” ê¹Šì´ê°€ 4ì¸ dfsë¡œ íƒìƒ‰ ê°€ëŠ¥í•˜ë‹¤. 
  
  - 'ã…œ' ëª¨ì–‘ ë„í˜•ë§Œ â˜†ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš° 3ê°œ ì¡°í•©ìœ¼ë¡œ ëª¨ì–‘ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
  

- ë§µ í¬ê¸°ë§Œí¼ ë°˜ë³µë¬¸ì„ ëŒë©° ë°©ë¬¸í•˜ì§€ ì•Šì„ ê²½ìš° í…ŒíŠ¸ë¡œë¯¸ë…¸ë¥¼ ë†“ëŠ”ë‹¤.
  1. dfsë¡œ ë„í˜•ì„ ë†“ê³  ë„í˜•ì´ ë†“ì¸ ìë¦¬ì— ìµœëŒ“ê°’ì„ êµ¬í•œë‹¤.
  2. ì¡°í•©ìœ¼ë¡œ 'ã…œ'ë„í˜•ì„ ë†“ê³  ë„í˜•ì´ ë†“ì¸ ìë¦¬ì— ìµœëŒ“ê°’ì„ êµ¬í•œë‹¤.
- ë§µ í¬ê¸°ë§Œí¼ ë°˜ë³µì´ ëë‚˜ë©´ ìµœëŒ€ê°’ì„ ì¶œë ¥í•œë‹¤.  

---

#### ì „ì²´ ì½”ë“œ

```java
import java.io.*;
import java.util.*;

public class Main {
  static int[] dy = { -1, 0, 1, 0 }; // â†‘ â†’ â†“ â†
  static int[] dx = { 0, 1, 0, -1 };
  static int N, M, max = Integer.MIN_VALUE;
  static int[][] map;
  static boolean[][] visited;

  public static void main(String[] args) throws Exception {
    // System.setIn(new FileInputStream("input.txt"));
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    StringTokenizer st = new StringTokenizer(br.readLine());
    N = Integer.parseInt(st.nextToken());
    M = Integer.parseInt(st.nextToken());
    map = new int[N][M];
    visited = new boolean[N][M];
    for (int i = 0; i < N; i++) {
      st = new StringTokenizer(br.readLine(), " ");
      for (int j = 0; j < M; j++) {
        map[i][j] = Integer.parseInt(st.nextToken());
      }
    }

    for (int i = 0; i < N; i++) {
      for (int j = 0; j < M; j++) {
        visited[i][j] = true;
        dfs(i, j, 1, map[i][j]);
        visited[i][j] = false;

        com(0, 0, i, j, map[i][j]);
      }
    }

    System.out.println(max);
  }

  private static void dfs(int y, int x, int cnt, int sum) {
    if (cnt == 4) {
      max = Math.max(max, sum);
      return;
    }

    for (int d = 0; d < 4; d++) {
      int ny = y + dy[d];
      int nx = x + dx[d];

      if (ny < 0 || ny >= N || nx < 0 || nx >= M || visited[ny][nx]) continue;

      visited[ny][nx] = true;
      dfs(ny, nx, cnt + 1, sum + map[ny][nx]);
      visited[ny][nx] = false;
    }
  }

  private static void com(int cnt, int start, int y, int x, int sum) {
    if (cnt == 3) {
      max = Math.max(max, sum);
      return;
    }

    for (int d = start; d < 4; d++) {
      int ny = y + dy[d];
      int nx = x + dx[d];

      if (ny < 0 || ny >= N || nx < 0 || nx >= M) continue;
      com(cnt + 1, d + 1, y, x, sum + map[ny][nx]);
    }
  }
}

```

