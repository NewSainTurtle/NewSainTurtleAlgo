### BJ21610 ë§ˆë²•ì‚¬ìƒì–´ì™€ë¹„ë°”ë¼ê¸°

[ğŸ“ë¬¸ì œë³´ê¸°](https://www.acmicpc.net/problem/21610)

---

#### ìœ ì˜ì‚¬í•­

- ê²©ìì˜ ê°€ì¥ ì™¼ìª½ ìœ— ì¹¸ì€ (1, 1)ì´ê³ , ê°€ì¥ ì˜¤ë¥¸ìª½ ì•„ë« ì¹¸ì€ (N, N)ì´ë‹¤.
- 8ê°œì˜ ë°©í–¥ì€  [â†, â†–, â†‘, â†—, â†’, â†˜, â†“, â†™] ìˆœìœ¼ë¡œ 1ë¶€í„° 8ê¹Œì§€ì´ë‹¤.

---

#### ë¬¸ì œí’€ì´

- ë¬¸ì œ ìˆœì„œëŒ€ë¡œ êµ¬í˜„í•œë‹¤.
  1. ëª¨ë“  êµ¬ë¦„ì´ di ë°©í–¥ìœ¼ë¡œ siì¹¸ ì´ë™í•œë‹¤.
  2. ê° êµ¬ë¦„ì—ì„œ ë¹„ê°€ ë‚´ë ¤ êµ¬ë¦„ì´ ìˆëŠ” ì¹¸ì˜ ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 1 ì¦ê°€í•œë‹¤.
  3. êµ¬ë¦„ì´ ëª¨ë‘ ì‚¬ë¼ì§„ë‹¤.
  4. 2ì—ì„œ ë¬¼ì´ ì¦ê°€í•œ ì¹¸ (r, c)ì— ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‹œì „í•œë‹¤. ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‚¬ìš©í•˜ë©´, ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì— ë¬¼ì´ ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ìˆ˜ë§Œí¼ (r, c)ì— ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ë¬¼ì´ ì–‘ì´ ì¦ê°€í•œë‹¤.
     - ì´ë•ŒëŠ” ì´ë™ê³¼ ë‹¤ë¥´ê²Œ ê²½ê³„ë¥¼ ë„˜ì–´ê°€ëŠ” ì¹¸ì€ ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì´ ì•„ë‹ˆë‹¤.
  5. ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì¸ ëª¨ë“  ì¹¸ì— êµ¬ë¦„ì´ ìƒê¸°ê³ , ë¬¼ì˜ ì–‘ì´ 2 ì¤„ì–´ë“ ë‹¤. ì´ë•Œ êµ¬ë¦„ì´ ìƒê¸°ëŠ” ì¹¸ì€ 3ì—ì„œ êµ¬ë¦„ì´ ì‚¬ë¼ì§„ ì¹¸ì´ ì•„ë‹ˆì–´ì•¼ í•œë‹¤.
  6. Më²ˆì˜ ì´ë™ì´ ëª¨ë‘ ëë‚œ í›„ ë°”êµ¬ë‹ˆì— ë“¤ì–´ìˆëŠ” ë¬¼ì˜ ì–‘ì˜ í•©ì„ êµ¬í•´ë³´ì.
- ìœ„ì¹˜ë¥¼ ì €ì¥í•  í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©(class Pos)
- êµ¬ë¦„ì˜ ìƒê¸¸ ë•Œ ìœ„ì¹˜ë¥¼ LinkedList<Pos> cloudì— ë‹´ì•„ ì‚¬ìš©
- êµ¬ë¦„ ì´ë™ í›„ ë¹„ë¥¼ ë‚´ë¦° êµ¬ë¦„ì˜ ìœ„ì¹˜ë¥¼ LinkedList<Pos> rainì— ë‹´ì•„ ì‚¬ìš©
- êµ¬ë¦„ì˜ ì´ë™ì„ (pos.y + (dy[d] * (s%N)) + N) % N ì‹ìœ¼ë¡œ í•œ ì¤„ë¡œ ê³„ì‚°
- 6ë²ˆê¹Œì§€ ëª¨ë“  êµ¬í˜„ì´ ëë‚˜ë©´ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤.

---

#### ì „ì²´ ì½”ë“œ

```java
import java.io.*;
import java.util.*;

public class Main {
  static class Pos {
    int y, x;
    Pos(int y, int x) {
      this.y = y;
      this.x = x;
    }
  }

  public static void main(String[] args) throws Exception {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int[] dy = { 0, -1, -1, -1, 0, 1, 1, 1 }; // â†, â†–, â†‘, â†—, â†’, â†˜, â†“, â†™
    int[] dx = { -1, -1, 0, 1, 1, 1, 0, -1 };
    
    // ì…ë ¥
    StringTokenizer st = new StringTokenizer(br.readLine(), " ");
    int N = Integer.parseInt(st.nextToken());
    int M = Integer.parseInt(st.nextToken());
    int[][] map = new int[N][N];
    for (int i = 0; i < N; i++) {
      st = new StringTokenizer(br.readLine(), " ");
      for (int j = 0; j < N; j++) {
        map[i][j] = Integer.parseInt(st.nextToken());
      }
    }

    // ì²˜ë¦¬(êµ¬ë¦„ ì´ë™, ë°©í–¥ ì…ë ¥ ë°›ìœ¼ë©´ì„œ)
    LinkedList<Pos> cloud = new LinkedList<>();
    LinkedList<Pos> rain = new LinkedList<>();
    cloud.add(new Pos(N - 1, 0));
    cloud.add(new Pos(N - 1, 1));
    cloud.add(new Pos(N - 2, 0));
    cloud.add(new Pos(N - 2, 1));
    for (int i = 0; i < M; i++) {
      boolean[][] visit = new boolean[N][N];
      st = new StringTokenizer(br.readLine(), " ");
      int d = Integer.parseInt(st.nextToken()) - 1; // ë°©í–¥
      int s = Integer.parseInt(st.nextToken()) % N; // ì´ë™
      while (!cloud.isEmpty()) {
        Pos pos = cloud.poll();
        int ny = (pos.y + (dy[d] * s) + N) % N, nx = (pos.x + (dx[d] * s) + N) % N; 
        visit[ny][nx] = true;
        map[ny][nx] += 1;
        rain.add(new Pos(ny, nx));
      }

      // 4. ë¬¼ë³µì‚¬ë§ˆë²•
      while (!rain.isEmpty()) {
        Pos pos = rain.poll();
        int cnt = 0;
        for (int t = 1; t < 8; t += 2) {
          int ny = pos.y + dy[t], nx = pos.x + dx[t];
          if (ny < 0 || nx < 0 || ny >= N || nx >= N || map[ny][nx] == 0) continue;
          cnt++;
        }
        map[pos.y][pos.x] += cnt;
      }
      
      // 5. ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì¸ ëª¨ë“  ì¹¸ì— êµ¬ë¦„ì´ ìƒê¸°ê³ , ë¬¼ì˜ ì–‘ì´ 2 ì¤„ì–´ë“ ë‹¤
      for (int j = 0; j < N; j++) {
        for (int k = 0; k < N; k++) {
          if (map[j][k] >= 2 && !visit[j][k]) {
            map[j][k] -= 2;
            cloud.add(new Pos(j, k));
          }
        }
      }
    }

    int sum = 0;
    for (int[] m : map) {
      for (int s : m) {
        sum += s;
      }
    }
    System.out.print(sum);
  }
}
```

